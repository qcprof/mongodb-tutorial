<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MongoDB Tutorial</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    :root {
      --bg-primary: #0f0f0f;
      --bg-secondary: #1a1a1a;
      --bg-tertiary: #252525;
      --bg-code: #1e1e1e;
      --text-primary: #f5f5f5;
      --text-secondary: #b3b3b3;
      --text-muted: #808080;
      --amber: #fbbf24;
      --amber-dark: #d97706;
      --amber-light: #fcd34d;
      --success: #10b981;
      --error: #ef4444;
      --warning: #f59e0b;
      --border: #404040;
      --shadow: rgba(0, 0, 0, 0.5);
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background-color: var(--bg-primary);
      color: var(--text-primary);
      line-height: 1.7;
      overflow-x: hidden;
    }

    .header {
      background: linear-gradient(135deg, var(--bg-secondary) 0%, #2d1b00 100%);
      border-bottom: 3px solid var(--amber);
      position: sticky;
      top: 0;
      z-index: 100;
      box-shadow: 0 4px 20px var(--shadow);
      transition: all 0.3s ease;
    }

    .header.minimized {
      padding: 0.5rem 2rem !important;
    }

    .header-content {
      padding: 2rem 2rem 1rem 2rem;
      transition: all 0.3s ease;
    }

    .header.minimized .header-content {
      padding: 0;
    }

    .header-main {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .header h1 {
      font-size: 2.5rem;
      color: var(--amber);
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
      transition: all 0.3s ease;
    }

    .header.minimized h1 {
      font-size: 1.5rem;
    }

    .header-toggle {
      background-color: var(--amber-dark);
      color: var(--bg-primary);
      border: none;
      padding: 0.5rem 1rem;
      border-radius: 0.5rem;
      cursor: pointer;
      font-weight: 600;
      font-size: 0.9rem;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .header-toggle:hover {
      background-color: var(--amber);
      transform: translateY(-2px);
    }

    .header-details {
      max-height: 1000px;
      overflow: hidden;
      transition: max-height 0.3s ease, opacity 0.3s ease, margin 0.3s ease;
      opacity: 1;
      margin-top: 1rem;
    }

    .header.minimized .header-details {
      max-height: 0;
      opacity: 0;
      margin-top: 0;
    }

    .header .subtitle {
      color: var(--text-secondary);
      font-size: 1.1rem;
    }

    .nav {
      background-color: var(--bg-secondary);
      padding: 1rem 2rem;
      border-bottom: 1px solid var(--border);
      position: sticky;
      top: 0;
      z-index: 99;
      overflow-x: auto;
      white-space: nowrap;
    }

    .nav-links {
      display: flex;
      gap: 1.5rem;
      list-style: none;
    }

    .nav-links a {
      color: var(--text-secondary);
      text-decoration: none;
      padding: 0.5rem 1rem;
      border-radius: 0.5rem;
      transition: all 0.3s ease;
      border: 1px solid transparent;
    }

    .nav-links a:hover {
      color: var(--amber);
      background-color: var(--bg-tertiary);
      border-color: var(--amber);
    }

    .container {
      max-width: 1400px;
      margin: 0 auto;
      padding: 2rem;
    }

    .section {
      background-color: var(--bg-secondary);
      border: 1px solid var(--border);
      border-radius: 1rem;
      padding: 2rem;
      margin-bottom: 2rem;
      box-shadow: 0 4px 10px var(--shadow);
    }

    .section h2 {
      color: var(--amber);
      font-size: 2rem;
      margin-bottom: 1.5rem;
      padding-bottom: 0.75rem;
      border-bottom: 2px solid var(--amber-dark);
    }

    .section h3 {
      color: var(--amber-light);
      font-size: 1.5rem;
      margin-top: 2rem;
      margin-bottom: 1rem;
    }

    .section h4 {
      color: var(--text-primary);
      font-size: 1.2rem;
      margin-top: 1.5rem;
      margin-bottom: 0.75rem;
      font-weight: 600;
    }

    .section p {
      color: var(--text-secondary);
      margin-bottom: 1rem;
    }

    .section ul,
    .section ol {
      color: var(--text-secondary);
      margin-left: 2rem;
      margin-bottom: 1rem;
    }

    .section li {
      margin-bottom: 0.5rem;
    }

    .code-block {
      position: relative;
      margin: 1.5rem 0;
    }

    .code-header {
      background-color: var(--bg-tertiary);
      padding: 0.75rem 1rem;
      border-radius: 0.5rem 0.5rem 0 0;
      display: flex;
      justify-content: space-between;
      align-items: center;
      border: 1px solid var(--border);
      border-bottom: none;
    }

    .code-label {
      color: var(--amber);
      font-weight: 600;
      font-size: 0.9rem;
    }

    .copy-btn {
      background-color: var(--amber-dark);
      color: var(--bg-primary);
      border: none;
      padding: 0.4rem 1rem;
      border-radius: 0.4rem;
      cursor: pointer;
      font-weight: 600;
      font-size: 0.85rem;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .copy-btn:hover {
      background-color: var(--amber);
      transform: translateY(-2px);
      box-shadow: 0 4px 8px rgba(251, 191, 36, 0.3);
    }

    .copy-btn:active {
      transform: translateY(0);
    }

    .copy-btn.copied {
      background-color: var(--success);
    }

    pre {
      background-color: var(--bg-code);
      border: 1px solid var(--border);
      border-top: none;
      border-radius: 0 0 0.5rem 0.5rem;
      padding: 1.5rem;
      overflow-x: auto;
      margin: 0;
    }

    code {
      color: var(--text-primary);
      font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
      font-size: 0.9rem;
      line-height: 1.6;
    }

    .inline-code {
      background-color: var(--bg-tertiary);
      color: var(--amber-light);
      padding: 0.2rem 0.5rem;
      border-radius: 0.3rem;
      font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
      font-size: 0.9em;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin: 1.5rem 0;
      background-color: var(--bg-tertiary);
      border: 1px solid var(--border);
      border-radius: 0.5rem;
      overflow: hidden;
    }

    thead {
      background-color: var(--amber-dark);
    }

    th {
      color: var(--bg-primary);
      padding: 1rem;
      text-align: left;
      font-weight: 600;
    }

    td {
      padding: 0.875rem 1rem;
      border-top: 1px solid var(--border);
      color: var(--text-secondary);
    }

    tbody tr:hover {
      background-color: rgba(251, 191, 36, 0.05);
    }

    .alert {
      padding: 1.25rem;
      border-radius: 0.75rem;
      margin: 1.5rem 0;
      border-left: 4px solid;
      display: flex;
      align-items: start;
      gap: 1rem;
    }

    .alert-icon {
      font-size: 1.5rem;
      flex-shrink: 0;
      margin-top: 0.1rem;
    }

    .alert-info {
      background-color: rgba(59, 130, 246, 0.1);
      border-color: #3b82f6;
      color: var(--text-primary);
    }

    .alert-info .alert-icon {
      color: #3b82f6;
    }

    .alert-success {
      background-color: rgba(16, 185, 129, 0.1);
      border-color: var(--success);
      color: var(--text-primary);
    }

    .alert-success .alert-icon {
      color: var(--success);
    }

    .alert-warning {
      background-color: rgba(245, 158, 11, 0.1);
      border-color: var(--warning);
      color: var(--text-primary);
    }

    .alert-warning .alert-icon {
      color: var(--warning);
    }

    .alert-error {
      background-color: rgba(239, 68, 68, 0.1);
      border-color: var(--error);
      color: var(--text-primary);
    }

    .alert-error .alert-icon {
      color: var(--error);
    }

    .collapsible {
      background-color: var(--bg-tertiary);
      border: 1px solid var(--border);
      border-radius: 0.75rem;
      margin: 1.5rem 0;
      overflow: hidden;
    }

    .collapsible-header {
      padding: 1.25rem;
      cursor: pointer;
      display: flex;
      justify-content: space-between;
      align-items: center;
      transition: background-color 0.3s ease;
      user-select: none;
    }

    .collapsible-header:hover {
      background-color: rgba(251, 191, 36, 0.05);
    }

    .collapsible-title {
      color: var(--amber);
      font-weight: 600;
      font-size: 1.1rem;
    }

    .collapsible-icon {
      color: var(--amber);
      font-size: 1.2rem;
      transition: transform 0.3s ease;
    }

    .collapsible.active .collapsible-icon {
      transform: rotate(180deg);
    }

    .collapsible-content {
      max-height: 0;
      overflow: hidden;
      transition: max-height 0.3s ease;
    }

    .collapsible.active .collapsible-content {
      max-height: 5000px;
    }

    .collapsible-body {
      padding: 1.5rem;
      border-top: 1px solid var(--border);
    }

    .steps {
      counter-reset: step-counter;
    }

    .step {
      position: relative;
      padding-left: 3.5rem;
      margin-bottom: 2rem;
      counter-increment: step-counter;
    }

    .step::before {
      content: counter(step-counter);
      position: absolute;
      left: 0;
      top: 0;
      width: 2.5rem;
      height: 2.5rem;
      background-color: var(--amber-dark);
      color: var(--bg-primary);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      font-size: 1.2rem;
      box-shadow: 0 4px 8px rgba(251, 191, 36, 0.3);
    }

    .step h4 {
      color: var(--amber-light);
      margin-top: 0;
    }

    .comparison-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 2rem;
      margin: 2rem 0;
    }

    .comparison-card {
      background-color: var(--bg-tertiary);
      border: 2px solid var(--border);
      border-radius: 0.75rem;
      padding: 1.5rem;
      transition: all 0.3s ease;
    }

    .comparison-card:hover {
      border-color: var(--amber);
      transform: translateY(-4px);
      box-shadow: 0 8px 20px rgba(251, 191, 36, 0.2);
    }

    .comparison-card h3 {
      margin-top: 0;
      color: var(--amber);
    }

    .pros-cons {
      margin-top: 1rem;
    }

    .pros-cons h4 {
      font-size: 1rem;
      margin-bottom: 0.5rem;
    }

    .pros-cons ul {
      margin-left: 1.5rem;
    }

    .pros-cons .pro {
      color: var(--success);
    }

    .pros-cons .con {
      color: var(--error);
    }

    .footer {
      background-color: var(--bg-secondary);
      border-top: 2px solid var(--amber);
      padding: 2rem;
      text-align: center;
      color: var(--text-muted);
      margin-top: 3rem;
    }

    ::-webkit-scrollbar {
      width: 12px;
      height: 12px;
    }

    ::-webkit-scrollbar-track {
      background: var(--bg-secondary);
    }

    ::-webkit-scrollbar-thumb {
      background: var(--amber-dark);
      border-radius: 6px;
    }

    ::-webkit-scrollbar-thumb:hover {
      background: var(--amber);
    }

    .back-to-top {
      position: fixed;
      bottom: 2rem;
      right: 2rem;
      background-color: var(--amber-dark);
      color: var(--bg-primary);
      width: 3rem;
      height: 3rem;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      opacity: 0;
      visibility: hidden;
      transition: all 0.3s ease;
      box-shadow: 0 4px 12px rgba(251, 191, 36, 0.4);
      border: none;
      font-size: 1.5rem;
      z-index: 1000;
    }

    .back-to-top.visible {
      opacity: 1;
      visibility: visible;
    }

    .back-to-top:hover {
      background-color: var(--amber);
      transform: translateY(-4px);
    }

    .id-approaches {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
      gap: 2rem;
      margin: 2rem 0;
    }

    .id-approach {
      background-color: var(--bg-tertiary);
      border: 2px solid var(--border);
      border-radius: 0.75rem;
      padding: 1.5rem;
    }

    .id-approach h4 {
      color: var(--amber);
      margin-top: 0;
      margin-bottom: 1rem;
      font-size: 1.3rem;
    }

    .id-approach.recommended {
      border-color: var(--success);
    }

    .recommended-badge {
      display: inline-block;
      background-color: var(--success);
      color: var(--bg-primary);
      padding: 0.25rem 0.75rem;
      border-radius: 1rem;
      font-size: 0.8rem;
      font-weight: 600;
      margin-left: 0.5rem;
    }

    @media (max-width: 768px) {
      .header h1 {
        font-size: 1.8rem;
      }

      .header.minimized h1 {
        font-size: 1.2rem;
      }

      .container {
        padding: 1rem;
      }

      .section {
        padding: 1.5rem;
      }

      .nav-links {
        flex-direction: column;
      }

      .step {
        padding-left: 3rem;
      }

      .step::before {
        width: 2rem;
        height: 2rem;
        font-size: 1rem;
      }

      .header-main {
        flex-direction: column;
        gap: 1rem;
        align-items: flex-start;
      }
    }
  </style>
</head>

<body>
  <div class="header">
    <div class="header-content">
      <div class="header-main">
        <h1>ğŸª MongoDB Tutorial</h1>
        <button class="header-toggle" onclick="toggleHeader()">
          <span id="toggle-icon">âˆ’</span>
          <span id="toggle-text">Minimize</span>
        </button>
      </div>
      <div class="header-details">
        <p class="subtitle">Understanding Document Databases through Julia's Cookies Sales System</p>
      </div>
    </div>
  </div>

  <nav class="nav">
    <ul class="nav-links">
      <li><a href="#intro">Introduction</a></li>
      <li><a href="#json">Understanding JSON</a></li>
      <li><a href="#model">Data Models</a></li>
      <li><a href="#setup">Setup & Insert</a></li>
      <li><a href="#embedded">Embedded Approach</a></li>
      <li><a href="#referenced">Referenced Approach</a></li>
      <li><a href="#comparison">Comparison</a></li>
      <li><a href="#exercises">Exercises</a></li>
      <li><a href="#reference">Quick Reference</a></li>
    </ul>
  </nav>

  <div class="container">

    <section id="intro" class="section">
      <h2>ğŸ“š Introduction</h2>

      <div class="alert alert-info">
        <span class="alert-icon">ğŸ’¡</span>
        <div>
          <strong>What You'll Learn:</strong> You'll create a sales order system for "Julia's Cookies" using MongoDB.
          You'll implement it TWO different ways to understand the strengths and weaknesses of each approach.
        </div>
      </div>

      <h3>Learning Objectives</h3>
      <ul>
        <li>Understand JSON data format and how MongoDB extends it with BSON</li>
        <li>Learn the difference between auto-generated and custom _id fields</li>
        <li>Create collections in MongoDB Atlas</li>
        <li>Insert documents using different ID strategies</li>
        <li>Understand embedded vs. referenced document structures</li>
        <li>Perform queries and aggregations on sales data</li>
        <li>Apply database concepts to accounting scenarios</li>
      </ul>

      <h3>Business Scenario</h3>
      <p>Julia's Cookies is a small bakery that sells cookies online. The system needs to track:</p>
      <ul>
        <li><strong>Customers</strong> - Who buys from us</li>
        <li><strong>Products</strong> - What we sell (chocolate chip, oatmeal, sugar cookies)</li>
        <li><strong>Sales Orders</strong> - Customer purchases with line items</li>
      </ul>

      <h3>Why This Matters for Accounting</h3>
      <ul>
        <li>Sales data drives revenue reporting</li>
        <li>Customer relationships affect accounts receivable</li>
        <li>Product information impacts inventory accounting</li>
        <li>Database design affects how you query financial data</li>
        <li>Modern ERP systems increasingly use document databases</li>
      </ul>
    </section>

    <section id="json" class="section">
      <h2>ğŸ“„ Understanding JSON (JavaScript Object Notation)</h2>

      <h3>What is JSON?</h3>
      <p>JSON (JavaScript Object Notation) is a lightweight, text-based data format that's easy for both humans to read
        and machines to parse. It's the foundation of how MongoDB stores data.</p>

      <h3>JSON Basics</h3>

      <h4>1. JSON Data Types</h4>
      <div class="code-block">
        <div class="code-header">
          <span class="code-label">JSON Data Types Example</span>
          <button class="copy-btn" onclick="copyCode(this)">
            <span>ğŸ“‹</span> Copy
          </button>
        </div>
        <pre><code>{
  "string": "John Smith",
  "number": 42,
  "decimal": 12.50,
  "boolean": true,
  "null_value": null,
  "array": [1, 2, 3, "four"],
  "object": {
    "nested_key": "nested_value"
  }
}</code></pre>
      </div>

      <table>
        <thead>
          <tr>
            <th>Data Type</th>
            <th>Example</th>
            <th>Notes</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><strong>String</strong></td>
            <td><code>"John Smith"</code></td>
            <td>Must use double quotes (not single)</td>
          </tr>
          <tr>
            <td><strong>Number</strong></td>
            <td><code>42</code> or <code>12.50</code></td>
            <td>No quotes around numbers</td>
          </tr>
          <tr>
            <td><strong>Boolean</strong></td>
            <td><code>true</code> or <code>false</code></td>
            <td>Lowercase, no quotes</td>
          </tr>
          <tr>
            <td><strong>Null</strong></td>
            <td><code>null</code></td>
            <td>Represents absence of value</td>
          </tr>
          <tr>
            <td><strong>Array</strong></td>
            <td><code>[1, 2, 3]</code></td>
            <td>Ordered list, use square brackets</td>
          </tr>
          <tr>
            <td><strong>Object</strong></td>
            <td><code>{"key": "value"}</code></td>
            <td>Key-value pairs, use curly braces</td>
          </tr>
        </tbody>
      </table>

      <h4>2. JSON Syntax Rules</h4>
      <div class="alert alert-warning">
        <span class="alert-icon">âš ï¸</span>
        <div>
          <strong>Critical JSON Rules:</strong>
          <ul style="margin-top: 0.5rem; margin-left: 1.5rem;">
            <li>Property names MUST be in double quotes: <code>"name"</code></li>
            <li>Strings MUST use double quotes (not single): <code>"value"</code></li>
            <li>No trailing commas: <code>{"a": 1, "b": 2}</code> âœ… vs <code>{"a": 1, "b": 2,}</code> âŒ</li>
            <li>No comments allowed in pure JSON</li>
            <li>Keys must be unique within an object</li>
          </ul>
        </div>
      </div>

      <h4>3. Valid vs Invalid JSON</h4>
      <div class="comparison-grid">
        <div class="comparison-card">
          <h3 style="color: var(--success);">âœ… Valid JSON</h3>
          <div class="code-block">
            <div class="code-header">
              <span class="code-label">Correct</span>
              <button class="copy-btn" onclick="copyCode(this)">
                <span>ğŸ“‹</span> Copy
              </button>
            </div>
            <pre><code>{
  "name": "John Smith",
  "age": 30,
  "active": true,
  "balance": 1250.50,
  "tags": ["customer", "vip"],
  "address": {
    "city": "Chicago",
    "state": "IL"
  }
}</code></pre>
          </div>
        </div>

        <div class="comparison-card">
          <h3 style="color: var(--error);">âŒ Invalid JSON</h3>
          <div class="code-block">
            <div class="code-header">
              <span class="code-label">Incorrect - Don't use this!</span>
            </div>
            <pre><code>{
  name: "John",           // âŒ Missing quotes on key
  "email": 'john@x.com',  // âŒ Single quotes
  "age": 30,              // âŒ Trailing comma below
  "tags": ["vip",],       // âŒ Trailing comma in array
}</code></pre>
          </div>
        </div>
      </div>

      <h3>How MongoDB Differs from JSON: BSON</h3>
      <p>MongoDB doesn't actually store pure JSON - it uses <strong>BSON (Binary JSON)</strong>, which is a
        binary-encoded serialization of JSON-like documents.</p>

      <h4>Key Differences: JSON vs BSON</h4>
      <table>
        <thead>
          <tr>
            <th>Feature</th>
            <th>JSON</th>
            <th>BSON (MongoDB)</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><strong>Format</strong></td>
            <td>Text-based (human readable)</td>
            <td>Binary (machine-optimized)</td>
          </tr>
          <tr>
            <td><strong>Data Types</strong></td>
            <td>6 types (string, number, boolean, null, array, object)</td>
            <td>Extended types: Date, ObjectId, Binary, Int32, Int64, Decimal128, etc.</td>
          </tr>
          <tr>
            <td><strong>Size</strong></td>
            <td>Smaller as text</td>
            <td>Slightly larger (includes type info + length)</td>
          </tr>
          <tr>
            <td><strong>Speed</strong></td>
            <td>Slower to parse</td>
            <td>Faster to traverse and query</td>
          </tr>
          <tr>
            <td><strong>Use Case</strong></td>
            <td>Data interchange, APIs, config files</td>
            <td>Database storage and internal operations</td>
          </tr>
        </tbody>
      </table>

      <h4>BSON-Specific Data Types You'll See</h4>

      <div class="collapsible">
        <div class="collapsible-header" onclick="toggleCollapsible(this)">
          <span class="collapsible-title">ObjectId - MongoDB's Unique Identifier</span>
          <span class="collapsible-icon">â–¼</span>
        </div>
        <div class="collapsible-content">
          <div class="collapsible-body">
            <p><strong>What it is:</strong> A 12-byte unique identifier automatically generated by MongoDB</p>
            <div class="code-block">
              <div class="code-header">
                <span class="code-label">ObjectId Example</span>
                <button class="copy-btn" onclick="copyCode(this)">
                  <span>ğŸ“‹</span> Copy
                </button>
              </div>
              <pre><code>ObjectId("507f1f77bcf86cd799439011")</code></pre>
            </div>
            <p><strong>Structure (12 bytes):</strong></p>
            <ul>
              <li>4 bytes: Timestamp (when document was created)</li>
              <li>5 bytes: Random value (unique to machine/process)</li>
              <li>3 bytes: Counter (incrementing value)</li>
            </ul>
            <p><strong>Why it matters:</strong> MongoDB automatically adds an <code>_id</code> field with an ObjectId to
              every document. This guarantees uniqueness across your entire database.</p>
          </div>
        </div>
      </div>

      <div class="collapsible">
        <div class="collapsible-header" onclick="toggleCollapsible(this)">
          <span class="collapsible-title">Date - Proper Date/Time Storage</span>
          <span class="collapsible-icon">â–¼</span>
        </div>
        <div class="collapsible-content">
          <div class="collapsible-body">
            <p><strong>What it is:</strong> BSON stores dates as 64-bit integers (milliseconds since Unix epoch)</p>
            <div class="code-block">
              <div class="code-header">
                <span class="code-label">Date in JSON vs BSON</span>
                <button class="copy-btn" onclick="copyCode(this)">
                  <span>ğŸ“‹</span> Copy
                </button>
              </div>
              <pre><code>// JSON (stored as string)
{
  "order_date": "2024-01-15"
}

// BSON (stored as Date object)
{
  "order_date": ISODate("2024-01-15T00:00:00Z")
}</code></pre>
            </div>
            <p><strong>Why it matters:</strong> Date objects allow for proper date arithmetic, comparisons, and timezone
              handling.</p>
          </div>
        </div>
      </div>

      <div class="collapsible">
        <div class="collapsible-header" onclick="toggleCollapsible(this)">
          <span class="collapsible-title">NumberDecimal - Precise Decimal Numbers</span>
          <span class="collapsible-icon">â–¼</span>
        </div>
        <div class="collapsible-content">
          <div class="collapsible-body">
            <p><strong>What it is:</strong> 128-bit decimal type for exact decimal representation (critical for
              financial data!)</p>
            <div class="code-block">
              <div class="code-header">
                <span class="code-label">Regular Number vs Decimal128</span>
                <button class="copy-btn" onclick="copyCode(this)">
                  <span>ğŸ“‹</span> Copy
                </button>
              </div>
              <pre><code>// Regular number (can have rounding errors)
{
  "price": 12.50
}

// NumberDecimal (exact precision for money)
{
  "price": NumberDecimal("12.50")
}</code></pre>
            </div>
            <p><strong>Why it matters:</strong> For accounting applications, you need exact decimal precision to avoid
              rounding errors in financial calculations.</p>
            <div class="alert alert-warning">
              <span class="alert-icon">ğŸ’°</span>
              <div>
                <strong>Accounting Tip:</strong> Always use NumberDecimal for monetary values to ensure accuracy in
                financial reporting!
              </div>
            </div>
          </div>
        </div>
      </div>

      <h3>Summary: JSON vs BSON</h3>
      <div class="alert alert-info">
        <span class="alert-icon">ğŸ“</span>
        <div>
          <strong>Key Takeaway:</strong>
          <ul style="margin-top: 0.5rem; margin-left: 1.5rem;">
            <li>You <strong>write</strong> JSON when inserting data into MongoDB</li>
            <li>MongoDB <strong>stores</strong> it as BSON internally for efficiency</li>
            <li>MongoDB <strong>returns</strong> data as JSON when you query</li>
            <li>BSON adds powerful data types (ObjectId, Date, Decimal) that pure JSON doesn't have</li>
            <li>For this tutorial, you'll work with JSON syntax, but MongoDB handles the BSON conversion automatically
            </li>
          </ul>
        </div>
      </div>
    </section>

    <section id="model" class="section">
      <h2>ğŸ—‚ï¸ Understanding Database Design Approaches</h2>

      <h3>Relational Database Approach (Traditional)</h3>
      <p>In a relational database, we create three separate tables with foreign keys linking them:</p>

      <div class="code-block">
        <div class="code-header">
          <span class="code-label">Relational Structure</span>
        </div>
        <pre><code>CUSTOMERS TABLE
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ customer_id  â”‚ name         â”‚ email             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ C001         â”‚ John Smith   â”‚ john@email.com    â”‚
â”‚ C002         â”‚ Sarah Jones  â”‚ sarah@email.com   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

PRODUCTS TABLE
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ product_id  â”‚ product_name     â”‚ price      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ P001        â”‚ Chocolate Chip   â”‚ 12.00      â”‚
â”‚ P002        â”‚ Oatmeal Raisin   â”‚ 10.00      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ORDERS TABLE
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ order_id  â”‚ customer_id  â”‚ product_id   â”‚ quantity â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ SO001     â”‚ C001         â”‚ P001         â”‚ 2        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</code></pre>
      </div>

      <div class="comparison-grid">
        <div class="comparison-card">
          <h3>ğŸ”— Embedded Approach</h3>
          <p>Store ALL related data within a single document:</p>
          <div class="code-block">
            <div class="code-header">
              <span class="code-label">JSON</span>
              <button class="copy-btn" onclick="copyCode(this)">
                <span>ğŸ“‹</span> Copy
              </button>
            </div>
            <pre><code>{
  "order_id": "SO001",
  "customer": {
    "customer_id": "C001",
    "name": "John Smith",
    "email": "john@email.com"
  },
  "items": [
    {
      "product_name": "Chocolate Chip",
      "quantity": 2,
      "price": 12.00
    }
  ],
  "total": 24.00
}</code></pre>
          </div>
          <div class="pros-cons">
            <h4 class="pro">âœ… Pros:</h4>
            <ul>
              <li>Single query gets everything</li>
              <li>Preserves historical data</li>
              <li>Faster performance</li>
            </ul>
            <h4 class="con">âŒ Cons:</h4>
            <ul>
              <li>Data duplication</li>
              <li>More storage space</li>
              <li>Hard to update master data</li>
            </ul>
          </div>
        </div>

        <div class="comparison-card">
          <h3>ğŸ”— Referenced Approach</h3>
          <p>Link documents using IDs (like foreign keys):</p>
          <div class="code-block">
            <div class="code-header">
              <span class="code-label">JSON</span>
              <button class="copy-btn" onclick="copyCode(this)">
                <span>ğŸ“‹</span> Copy
              </button>
            </div>
            <pre><code>{
  "order_id": "SO001",
  "customer_id": "C001",
  "items": [
    {
      "product_id": "P001",
      "quantity": 2
    }
  ]
}</code></pre>
          </div>
          <div class="pros-cons">
            <h4 class="pro">âœ… Pros:</h4>
            <ul>
              <li>No data duplication</li>
              <li>Easy to update master data</li>
              <li>Consistent information</li>
            </ul>
            <h4 class="con">âŒ Cons:</h4>
            <ul>
              <li>Multiple queries needed</li>
              <li>More complex to retrieve</li>
              <li>Slower for reporting</li>
            </ul>
          </div>
        </div>
      </div>

      <h3>MongoDB's _id Field: Two Approaches</h3>
      <p>When you insert a document into MongoDB, you have two options for the <code>_id</code> field (MongoDB's primary
        key):</p>

      <div class="id-approaches">
        <div class="id-approach recommended">
          <h4>Approach A: Auto-Generated _id <span class="recommended-badge">RECOMMENDED</span></h4>
          <p><strong>How it works:</strong> Let MongoDB automatically generate the <code>_id</code> field, and use your
            own custom IDs as regular fields.</p>
          <div class="code-block">
            <div class="code-header">
              <span class="code-label">What You Insert</span>
              <button class="copy-btn" onclick="copyCode(this)">
                <span>ğŸ“‹</span> Copy
              </button>
            </div>
            <pre><code>{
  "order_id": "SO001",
  "customer_id": "C001",
  "order_date": "2024-01-15",
  "total": 37.80
}</code></pre>
          </div>
          <div class="code-block">
            <div class="code-header">
              <span class="code-label">What MongoDB Stores</span>
              <button class="copy-btn" onclick="copyCode(this)">
                <span>ğŸ“‹</span> Copy
              </button>
            </div>
            <pre><code>{
  "_id": ObjectId("507f1f77bcf86cd799439011"),
  "order_id": "SO001",
  "customer_id": "C001",
  "order_date": "2024-01-15",
  "total": 37.80
}</code></pre>
          </div>
          <p><strong>âœ… Advantages:</strong></p>
          <ul>
            <li>MongoDB guarantees uniqueness automatically</li>
            <li>No risk of duplicate key errors</li>
            <li>You still have human-readable IDs for business logic</li>
            <li>Best practice for beginners</li>
          </ul>
          <p><strong>âš ï¸ Considerations:</strong></p>
          <ul>
            <li>Two ID fields per document (minimal overhead)</li>
            <li>Must query by <code>order_id</code> instead of <code>_id</code> for business operations</li>
          </ul>
          <div class="alert alert-success">
            <span class="alert-icon">ğŸ’¡</span>
            <div>
              <strong>This Tutorial Uses Approach A:</strong> All examples use auto-generated <code>_id</code> with
              custom business IDs like <code>order_id</code>, <code>customer_id</code>, etc.
            </div>
          </div>
        </div>

        <div class="id-approach">
          <h4>Approach B: Custom _id</h4>
          <p><strong>How it works:</strong> Override the <code>_id</code> field with your own custom value.</p>
          <div class="code-block">
            <div class="code-header">
              <span class="code-label">What You Insert</span>
              <button class="copy-btn" onclick="copyCode(this)">
                <span>ğŸ“‹</span> Copy
              </button>
            </div>
            <pre><code>{
  "_id": "SO001",
  "customer_id": "C001",
  "order_date": "2024-01-15",
  "total": 37.80
}</code></pre>
          </div>
          <div class="code-block">
            <div class="code-header">
              <span class="code-label">What MongoDB Stores (Same)</span>
              <button class="copy-btn" onclick="copyCode(this)">
                <span>ğŸ“‹</span> Copy
              </button>
            </div>
            <pre><code>{
  "_id": "SO001",
  "customer_id": "C001",
  "order_date": "2024-01-15",
  "total": 37.80
}</code></pre>
          </div>
          <p><strong>âœ… Advantages:</strong></p>
          <ul>
            <li>Simpler structure (one ID instead of two)</li>
            <li>Human-readable primary key</li>
            <li>Works well if you have existing ID schemes</li>
          </ul>
          <p><strong>âš ï¸ Considerations:</strong></p>
          <ul>
            <li><strong>You must ensure uniqueness</strong> - MongoDB will reject duplicate <code>_id</code> values</li>
            <li>Insert will fail if <code>_id</code> already exists</li>
            <li>More responsibility on you as the developer</li>
          </ul>
        </div>
      </div>

      <h3>Querying with Different _id Approaches</h3>
      <table>
        <thead>
          <tr>
            <th>Scenario</th>
            <th>Approach A (Auto _id)</th>
            <th>Approach B (Custom _id)</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><strong>Find order SO001</strong></td>
            <td><code>{ "order_id": "SO001" }</code></td>
            <td><code>{ "_id": "SO001" }</code></td>
          </tr>
          <tr>
            <td><strong>Find by MongoDB's ID</strong></td>
            <td><code>{ "_id": ObjectId("...") }</code></td>
            <td><code>{ "_id": "SO001" }</code></td>
          </tr>
          <tr>
            <td><strong>Uniqueness guaranteed by</strong></td>
            <td>MongoDB (automatic)</td>
            <td>You (manual)</td>
          </tr>
        </tbody>
      </table>

      <div class="alert alert-info">
        <span class="alert-icon">ğŸ’¡</span>
        <div>
          <strong>For This Tutorial:</strong> We use <strong>Approach A</strong> (auto-generated <code>_id</code> with
          custom business IDs). This is the safest option for learning and matches most real-world applications where
          MongoDB manages the primary key while you maintain business-friendly identifiers.
        </div>
      </div>
    </section>

    <section id="setup" class="section">
      <h2>âš™ï¸ Setting Up Your Database</h2>

      <div class="alert alert-warning">
        <span class="alert-icon">âš ï¸</span>
        <div>
          <strong>Prerequisites:</strong> Make sure you have a MongoDB Atlas account and have created a cluster before
          starting this section.
        </div>
      </div>

      <div class="steps">
        <div class="step">
          <h4>Access MongoDB Atlas</h4>
          <p>Log in to <strong>MongoDB Atlas</strong> at https://www.mongodb.com/cloud/atlas and click on your cluster.
          </p>
        </div>

        <div class="step">
          <h4>Browse Collections</h4>
          <p>Click the <strong>"Browse Collections"</strong> button to view your databases.</p>
        </div>

        <div class="step">
          <h4>Create Your Database</h4>
          <ul>
            <li>Click <strong>"Add My Own Data"</strong></li>
            <li>Database name: <span class="inline-code">JuliasCookies</span></li>
            <li>Collection name: <span class="inline-code">customers</span></li>
            <li>Click <strong>"Create"</strong></li>
          </ul>
        </div>
      </div>

      <div class="alert alert-success">
        <span class="alert-icon">âœ…</span>
        <div>
          <strong>Success!</strong> You've created your first database and collection! MongoDB automatically added the
          <code>_id</code> field capability to this collection.
        </div>
      </div>

      <h3>How to Insert Documents in MongoDB Atlas</h3>
      <p>There are two ways to insert documents:</p>

      <h4>Method 1: Insert Document Button (Graphical Interface)</h4>
      <div class="steps">
        <div class="step">
          <h4>Click "Insert Document"</h4>
          <p>In your collection view, click the green <strong>"Insert Document"</strong> button.</p>
        </div>

        <div class="step">
          <h4>Switch to Code View</h4>
          <p>Toggle from the visual editor to <strong>{} code view</strong> (looks like curly braces icon).</p>
        </div>

        <div class="step">
          <h4>Delete Default Content</h4>
          <p>Remove the default <code>{"_id": {"$oid": "..."}}</code> that appears.</p>
        </div>

        <div class="step">
          <h4>Paste Your JSON</h4>
          <p>Copy any of the JSON documents from this tutorial and paste them in.</p>
        </div>

        <div class="step">
          <h4>Click Insert</h4>
          <p>Click the <strong>"Insert"</strong> button. MongoDB will automatically add the <code>_id</code> field!</p>
        </div>
      </div>

      <h4>Method 2: MongoDB Shell (mongosh)</h4>
      <p>If you're comfortable with the command line:</p>
      <div class="code-block">
        <div class="code-header">
          <span class="code-label">Insert using mongosh</span>
          <button class="copy-btn" onclick="copyCode(this)">
            <span>ğŸ“‹</span> Copy
          </button>
        </div>
        <pre><code>use JuliasCookies

db.customers.insertOne({
  "customer_id": "C001",
  "name": "John Smith",
  "email": "john@email.com"
})</code></pre>
      </div>

      <div class="alert alert-info">
        <span class="alert-icon">ğŸ’¡</span>
        <div>
          <strong>Note:</strong> This tutorial focuses on <strong>Method 1</strong> (the graphical interface) as it's
          more beginner-friendly and you can see the JSON structure clearly.
        </div>
      </div>
    </section>

    <section id="embedded" class="section">
      <h2>ğŸ“¦ Part 1: The Embedded Approach (MongoDB Way)</h2>

      <p>In this approach, we store ALL related data within a single document. This is MongoDB's strength!</p>

      <h3>When to Use Embedded Documents</h3>
      <ul>
        <li>Data is always accessed together</li>
        <li>Historical accuracy matters (audit trails)</li>
        <li>One-to-few relationships (e.g., one order with 1-10 line items)</li>
        <li>Read performance is critical</li>
      </ul>

      <h3>Step 1: Create Collections</h3>
      <p>Create these two collections:</p>
      <ol>
        <li><span class="inline-code">customers_embedded</span> - Customer master data</li>
        <li><span class="inline-code">orders_embedded</span> - Orders with embedded customer and product data</li>
      </ol>

      <h3>Step 2: Insert Customer Data</h3>
      <p>In the <span class="inline-code">customers_embedded</span> collection, insert these documents:</p>

      <div class="collapsible">
        <div class="collapsible-header" onclick="toggleCollapsible(this)">
          <span class="collapsible-title">Customer 1: John Smith</span>
          <span class="collapsible-icon">â–¼</span>
        </div>
        <div class="collapsible-content">
          <div class="collapsible-body">
            <div class="code-block">
              <div class="code-header">
                <span class="code-label">JSON Document</span>
                <button class="copy-btn" onclick="copyCode(this)">
                  <span>ğŸ“‹</span> Copy
                </button>
              </div>
              <pre><code>{
  "customer_id": "C001",
  "name": "John Smith",
  "email": "john@email.com",
  "phone": "555-0101",
  "address": {
    "street": "123 Main St",
    "city": "Chicago",
    "state": "IL",
    "zip": "60601"
  },
  "credit_limit": 5000.00,
  "credit_terms": "Net 30",
  "registration_date": "2023-12-01"
}</code></pre>
            </div>
            <div class="alert alert-info">
              <span class="alert-icon">ğŸ”</span>
              <div>
                <strong>What happens:</strong> When you insert this, MongoDB automatically adds:<br>
                <code>"_id": ObjectId("...")</code> at the beginning of the document.
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="collapsible">
        <div class="collapsible-header" onclick="toggleCollapsible(this)">
          <span class="collapsible-title">Customer 2: Sarah Jones</span>
          <span class="collapsible-icon">â–¼</span>
        </div>
        <div class="collapsible-content">
          <div class="collapsible-body">
            <div class="code-block">
              <div class="code-header">
                <span class="code-label">JSON Document</span>
                <button class="copy-btn" onclick="copyCode(this)">
                  <span>ğŸ“‹</span> Copy
                </button>
              </div>
              <pre><code>{
  "customer_id": "C002",
  "name": "Sarah Jones",
  "email": "sarah@email.com",
  "phone": "555-0102",
  "address": {
    "street": "456 Oak Ave",
    "city": "Naperville",
    "state": "IL",
    "zip": "60540"
  },
  "credit_limit": 3000.00,
  "credit_terms": "Net 30",
  "registration_date": "2024-01-10"
}</code></pre>
            </div>
          </div>
        </div>
      </div>

      <div class="collapsible">
        <div class="collapsible-header" onclick="toggleCollapsible(this)">
          <span class="collapsible-title">Customer 3: Michael Chen</span>
          <span class="collapsible-icon">â–¼</span>
        </div>
        <div class="collapsible-content">
          <div class="collapsible-body">
            <div class="code-block">
              <div class="code-header">
                <span class="code-label">JSON Document</span>
                <button class="copy-btn" onclick="copyCode(this)">
                  <span>ğŸ“‹</span> Copy
                </button>
              </div>
              <pre><code>{
  "customer_id": "C003",
  "name": "Michael Chen",
  "email": "michael@email.com",
  "phone": "555-0103",
  "address": {
    "street": "789 Elm Blvd",
    "city": "Aurora",
    "state": "IL",
    "zip": "60505"
  },
  "credit_limit": 10000.00,
  "credit_terms": "Net 45",
  "registration_date": "2023-11-15"
}</code></pre>
            </div>
          </div>
        </div>
      </div>

      <h3>Step 3: Insert Order Data (Embedded)</h3>
      <p>Now insert orders in the <span class="inline-code">orders_embedded</span> collection with embedded customer and
        product data:</p>

      <div class="collapsible">
        <div class="collapsible-header" onclick="toggleCollapsible(this)">
          <span class="collapsible-title">Order SO001 - John Smith (2 items)</span>
          <span class="collapsible-icon">â–¼</span>
        </div>
        <div class="collapsible-content">
          <div class="collapsible-body">
            <div class="code-block">
              <div class="code-header">
                <span class="code-label">JSON Document</span>
                <button class="copy-btn" onclick="copyCode(this)">
                  <span>ğŸ“‹</span> Copy
                </button>
              </div>
              <pre><code>{
  "order_id": "SO001",
  "order_date": "2024-01-15",
  "customer": {
    "customer_id": "C001",
    "name": "John Smith",
    "email": "john@email.com",
    "phone": "555-0101"
  },
  "shipping_address": {
    "street": "123 Main St",
    "city": "Chicago",
    "state": "IL",
    "zip": "60601"
  },
  "items": [
    {
      "product_id": "P001",
      "product_name": "Chocolate Chip Cookies (Dozen)",
      "quantity": 2,
      "unit_price": 12.00,
      "subtotal": 24.00
    },
    {
      "product_id": "P003",
      "product_name": "Sugar Cookies (Dozen)",
      "quantity": 1,
      "unit_price": 11.00,
      "subtotal": 11.00
    }
  ],
  "order_total": 35.00,
  "tax": 2.80,
  "grand_total": 37.80,
  "payment_method": "Credit Card",
  "order_status": "Completed",
  "shipment_date": "2024-01-16"
}</code></pre>
            </div>
          </div>
        </div>
      </div>

      <div class="collapsible">
        <div class="collapsible-header" onclick="toggleCollapsible(this)">
          <span class="collapsible-title">Order SO002 - Sarah Jones (1 item)</span>
          <span class="collapsible-icon">â–¼</span>
        </div>
        <div class="collapsible-content">
          <div class="collapsible-body">
            <div class="code-block">
              <div class="code-header">
                <span class="code-label">JSON Document</span>
                <button class="copy-btn" onclick="copyCode(this)">
                  <span>ğŸ“‹</span> Copy
                </button>
              </div>
              <pre><code>{
  "order_id": "SO002",
  "order_date": "2024-01-16",
  "customer": {
    "customer_id": "C002",
    "name": "Sarah Jones",
    "email": "sarah@email.com",
    "phone": "555-0102"
  },
  "shipping_address": {
    "street": "456 Oak Ave",
    "city": "Naperville",
    "state": "IL",
    "zip": "60540"
  },
  "items": [
    {
      "product_id": "P002",
      "product_name": "Oatmeal Raisin Cookies (Dozen)",
      "quantity": 3,
      "unit_price": 10.00,
      "subtotal": 30.00
    }
  ],
  "order_total": 30.00,
  "tax": 2.40,
  "grand_total": 32.40,
  "payment_method": "Debit Card",
  "order_status": "Shipped",
  "shipment_date": "2024-01-17"
}</code></pre>
            </div>
          </div>
        </div>
      </div>

      <div class="collapsible">
        <div class="collapsible-header" onclick="toggleCollapsible(this)">
          <span class="collapsible-title">Order SO003 - Michael Chen (3 items, Large Order)</span>
          <span class="collapsible-icon">â–¼</span>
        </div>
        <div class="collapsible-content">
          <div class="collapsible-body">
            <div class="code-block">
              <div class="code-header">
                <span class="code-label">JSON Document</span>
                <button class="copy-btn" onclick="copyCode(this)">
                  <span>ğŸ“‹</span> Copy
                </button>
              </div>
              <pre><code>{
  "order_id": "SO003",
  "order_date": "2024-01-18",
  "customer": {
    "customer_id": "C003",
    "name": "Michael Chen",
    "email": "michael@email.com",
    "phone": "555-0103"
  },
  "shipping_address": {
    "street": "789 Elm Blvd",
    "city": "Aurora",
    "state": "IL",
    "zip": "60505"
  },
  "items": [
    {
      "product_id": "P001",
      "product_name": "Chocolate Chip Cookies (Dozen)",
      "quantity": 5,
      "unit_price": 12.00,
      "subtotal": 60.00
    },
    {
      "product_id": "P002",
      "product_name": "Oatmeal Raisin Cookies (Dozen)",
      "quantity": 3,
      "unit_price": 10.00,
      "subtotal": 30.00
    },
    {
      "product_id": "P003",
      "product_name": "Sugar Cookies (Dozen)",
      "quantity": 4,
      "unit_price": 11.00,
      "subtotal": 44.00
    }
  ],
  "order_total": 134.00,
  "tax": 10.72,
  "grand_total": 144.72,
  "payment_method": "Invoice",
  "order_status": "Pending",
  "shipment_date": null
}</code></pre>
            </div>
          </div>
        </div>
      </div>

      <div class="collapsible">
        <div class="collapsible-header" onclick="toggleCollapsible(this)">
          <span class="collapsible-title">Order SO004 - John Smith (1 item, Repeat Customer)</span>
          <span class="collapsible-icon">â–¼</span>
        </div>
        <div class="collapsible-content">
          <div class="collapsible-body">
            <div class="code-block">
              <div class="code-header">
                <span class="code-label">JSON Document</span>
                <button class="copy-btn" onclick="copyCode(this)">
                  <span>ğŸ“‹</span> Copy
                </button>
              </div>
              <pre><code>{
  "order_id": "SO004",
  "order_date": "2024-01-20",
  "customer": {
    "customer_id": "C001",
    "name": "John Smith",
    "email": "john@email.com",
    "phone": "555-0101"
  },
  "shipping_address": {
    "street": "123 Main St",
    "city": "Chicago",
    "state": "IL",
    "zip": "60601"
  },
  "items": [
    {
      "product_id": "P002",
      "product_name": "Oatmeal Raisin Cookies (Dozen)",
      "quantity": 4,
      "unit_price": 10.00,
      "subtotal": 40.00
    }
  ],
  "order_total": 40.00,
  "tax": 3.20,
  "grand_total": 43.20,
  "payment_method": "Credit Card",
  "order_status": "Completed",
  "shipment_date": "2024-01-21"
}</code></pre>
            </div>
          </div>
        </div>
      </div>

      <h3>Step 4: Query Embedded Documents</h3>
      <p>Now let's run queries that accountants typically need!</p>

      <div class="collapsible">
        <div class="collapsible-header" onclick="toggleCollapsible(this)">
          <span class="collapsible-title">Query 1: Find All Orders for a Customer</span>
          <span class="collapsible-icon">â–¼</span>
        </div>
        <div class="collapsible-content">
          <div class="collapsible-body">
            <p><strong>Use Case:</strong> Customer order history for accounts receivable analysis</p>
            <div class="code-block">
              <div class="code-header">
                <span class="code-label">Filter Query</span>
                <button class="copy-btn" onclick="copyCode(this)">
                  <span>ğŸ“‹</span> Copy
                </button>
              </div>
              <pre><code>{ "customer.customer_id": "C001" }</code></pre>
            </div>
            <p><strong>Result:</strong> Returns orders SO001 and SO004 (both for John Smith)</p>
          </div>
        </div>
      </div>

      <div class="collapsible">
        <div class="collapsible-header" onclick="toggleCollapsible(this)">
          <span class="collapsible-title">Query 2: Find Pending Orders</span>
          <span class="collapsible-icon">â–¼</span>
        </div>
        <div class="collapsible-content">
          <div class="collapsible-body">
            <p><strong>Use Case:</strong> Pending orders represent unfulfilled revenue obligations</p>
            <div class="code-block">
              <div class="code-header">
                <span class="code-label">Filter Query</span>
                <button class="copy-btn" onclick="copyCode(this)">
                  <span>ğŸ“‹</span> Copy
                </button>
              </div>
              <pre><code>{ "order_status": "Pending" }</code></pre>
            </div>
            <p><strong>Result:</strong> Returns order SO003</p>
          </div>
        </div>
      </div>

      <div class="collapsible">
        <div class="collapsible-header" onclick="toggleCollapsible(this)">
          <span class="collapsible-title">Query 3: Find Large Orders (Over $100)</span>
          <span class="collapsible-icon">â–¼</span>
        </div>
        <div class="collapsible-content">
          <div class="collapsible-body">
            <p><strong>Use Case:</strong> Large orders may require special approval or credit checks</p>
            <div class="code-block">
              <div class="code-header">
                <span class="code-label">Filter Query</span>
                <button class="copy-btn" onclick="copyCode(this)">
                  <span>ğŸ“‹</span> Copy
                </button>
              </div>
              <pre><code>{ "grand_total": { "$gt": 100 } }</code></pre>
            </div>
            <p><strong>Result:</strong> Returns order SO003 (grand total: $144.72)</p>
          </div>
        </div>
      </div>

      <div class="collapsible">
        <div class="collapsible-header" onclick="toggleCollapsible(this)">
          <span class="collapsible-title">Query 4: Find Orders with Specific Product</span>
          <span class="collapsible-icon">â–¼</span>
        </div>
        <div class="collapsible-content">
          <div class="collapsible-body">
            <p><strong>Use Case:</strong> Product profitability analysis and inventory planning</p>
            <div class="code-block">
              <div class="code-header">
                <span class="code-label">Filter Query</span>
                <button class="copy-btn" onclick="copyCode(this)">
                  <span>ğŸ“‹</span> Copy
                </button>
              </div>
              <pre><code>{ "items.product_id": "P001" }</code></pre>
            </div>
            <p><strong>Result:</strong> Returns orders SO001 and SO003 (both contain Chocolate Chip cookies)</p>
          </div>
        </div>
      </div>

      <div class="alert alert-info">
        <span class="alert-icon">ğŸ’¡</span>
        <div>
          <strong>Key Observation:</strong> Customer data (name, email, phone) is duplicated in each order. This is
          intentional! It preserves the data as it was at the time of the transaction - crucial for accounting audit
          trails.
        </div>
      </div>
    </section>

    <section id="referenced" class="section">
      <h2>ğŸ”— Part 2: The Referenced Approach (Relational Way)</h2>

      <p>Now let's implement the same system using references - similar to foreign keys in relational databases.</p>

      <h3>When to Use Referenced Documents</h3>
      <ul>
        <li>Data changes frequently and needs to stay consistent</li>
        <li>Master data tables (customers, products, employees)</li>
        <li>Many-to-many relationships</li>
        <li>Storage optimization is important</li>
      </ul>

      <h3>Step 1: Create Collections</h3>
      <p>Create these FOUR collections:</p>
      <ol>
        <li><span class="inline-code">customers_ref</span> - Customer master data</li>
        <li><span class="inline-code">products_ref</span> - Product master data</li>
        <li><span class="inline-code">orders_ref</span> - Order headers</li>
        <li><span class="inline-code">order_items_ref</span> - Order line items</li>
      </ol>

      <h3>Step 2: Insert Customer Master Data</h3>

      <div class="collapsible">
        <div class="collapsible-header" onclick="toggleCollapsible(this)">
          <span class="collapsible-title">All 3 Customers for customers_ref</span>
          <span class="collapsible-icon">â–¼</span>
        </div>
        <div class="collapsible-content">
          <div class="collapsible-body">
            <p>Insert these three documents in <span class="inline-code">customers_ref</span>:</p>
            <div class="code-block">
              <div class="code-header">
                <span class="code-label">Customer 1</span>
                <button class="copy-btn" onclick="copyCode(this)">
                  <span>ğŸ“‹</span> Copy
                </button>
              </div>
              <pre><code>{
  "customer_id": "C001",
  "name": "John Smith",
  "email": "john@email.com",
  "phone": "555-0101",
  "address": {
    "street": "123 Main St",
    "city": "Chicago",
    "state": "IL",
    "zip": "60601"
  },
  "credit_limit": 5000.00,
  "credit_terms": "Net 30",
  "registration_date": "2023-12-01",
  "active": true
}</code></pre>
            </div>
            <div class="code-block">
              <div class="code-header">
                <span class="code-label">Customer 2</span>
                <button class="copy-btn" onclick="copyCode(this)">
                  <span>ğŸ“‹</span> Copy
                </button>
              </div>
              <pre><code>{
  "customer_id": "C002",
  "name": "Sarah Jones",
  "email": "sarah@email.com",
  "phone": "555-0102",
  "address": {
    "street": "456 Oak Ave",
    "city": "Naperville",
    "state": "IL",
    "zip": "60540"
  },
  "credit_limit": 3000.00,
  "credit_terms": "Net 30",
  "registration_date": "2024-01-10",
  "active": true
}</code></pre>
            </div>
            <div class="code-block">
              <div class="code-header">
                <span class="code-label">Customer 3</span>
                <button class="copy-btn" onclick="copyCode(this)">
                  <span>ğŸ“‹</span> Copy
                </button>
              </div>
              <pre><code>{
  "customer_id": "C003",
  "name": "Michael Chen",
  "email": "michael@email.com",
  "phone": "555-0103",
  "address": {
    "street": "789 Elm Blvd",
    "city": "Aurora",
    "state": "IL",
    "zip": "60505"
  },
  "credit_limit": 10000.00,
  "credit_terms": "Net 45",
  "registration_date": "2023-11-15",
  "active": true
}</code></pre>
            </div>
          </div>
        </div>
      </div>

      <h3>Step 3: Insert Product Master Data</h3>

      <div class="collapsible">
        <div class="collapsible-header" onclick="toggleCollapsible(this)">
          <span class="collapsible-title">All 3 Products for products_ref</span>
          <span class="collapsible-icon">â–¼</span>
        </div>
        <div class="collapsible-content">
          <div class="collapsible-body">
            <p>Insert these three products in <span class="inline-code">products_ref</span>:</p>
            <div class="code-block">
              <div class="code-header">
                <span class="code-label">Product 1</span>
                <button class="copy-btn" onclick="copyCode(this)">
                  <span>ğŸ“‹</span> Copy
                </button>
              </div>
              <pre><code>{
  "product_id": "P001",
  "product_name": "Chocolate Chip Cookies (Dozen)",
  "category": "Classic Cookies",
  "unit_price": 12.00,
  "cost": 6.50,
  "inventory_on_hand": 150,
  "active": true
}</code></pre>
            </div>
            <div class="code-block">
              <div class="code-header">
                <span class="code-label">Product 2</span>
                <button class="copy-btn" onclick="copyCode(this)">
                  <span>ğŸ“‹</span> Copy
                </button>
              </div>
              <pre><code>{
  "product_id": "P002",
  "product_name": "Oatmeal Raisin Cookies (Dozen)",
  "category": "Classic Cookies",
  "unit_price": 10.00,
  "cost": 5.50,
  "inventory_on_hand": 120,
  "active": true
}</code></pre>
            </div>
            <div class="code-block">
              <div class="code-header">
                <span class="code-label">Product 3</span>
                <button class="copy-btn" onclick="copyCode(this)">
                  <span>ğŸ“‹</span> Copy
                </button>
              </div>
              <pre><code>{
  "product_id": "P003",
  "product_name": "Sugar Cookies (Dozen)",
  "category": "Classic Cookies",
  "unit_price": 11.00,
  "cost": 6.00,
  "inventory_on_hand": 100,
  "active": true
}</code></pre>
            </div>
          </div>
        </div>
      </div>

      <h3>Step 4: Insert Order Headers</h3>

      <div class="collapsible">
        <div class="collapsible-header" onclick="toggleCollapsible(this)">
          <span class="collapsible-title">All 4 Order Headers for orders_ref</span>
          <span class="collapsible-icon">â–¼</span>
        </div>
        <div class="collapsible-content">
          <div class="collapsible-body">
            <p>Notice: Orders only contain <span class="inline-code">customer_id</span> (a reference), not full customer
              data!</p>
            <div class="code-block">
              <div class="code-header">
                <span class="code-label">Order SO001</span>
                <button class="copy-btn" onclick="copyCode(this)">
                  <span>ğŸ“‹</span> Copy
                </button>
              </div>
              <pre><code>{
  "order_id": "SO001",
  "customer_id": "C001",
  "order_date": "2024-01-15",
  "order_total": 35.00,
  "tax": 2.80,
  "grand_total": 37.80,
  "payment_method": "Credit Card",
  "order_status": "Completed",
  "shipment_date": "2024-01-16"
}</code></pre>
            </div>
            <div class="code-block">
              <div class="code-header">
                <span class="code-label">Order SO002</span>
                <button class="copy-btn" onclick="copyCode(this)">
                  <span>ğŸ“‹</span> Copy
                </button>
              </div>
              <pre><code>{
  "order_id": "SO002",
  "customer_id": "C002",
  "order_date": "2024-01-16",
  "order_total": 30.00,
  "tax": 2.40,
  "grand_total": 32.40,
  "payment_method": "Debit Card",
  "order_status": "Shipped",
  "shipment_date": "2024-01-17"
}</code></pre>
            </div>
            <div class="code-block">
              <div class="code-header">
                <span class="code-label">Order SO003</span>
                <button class="copy-btn" onclick="copyCode(this)">
                  <span>ğŸ“‹</span> Copy
                </button>
              </div>
              <pre><code>{
  "order_id": "SO003",
  "customer_id": "C003",
  "order_date": "2024-01-18",
  "order_total": 134.00,
  "tax": 10.72,
  "grand_total": 144.72,
  "payment_method": "Invoice",
  "order_status": "Pending",
  "shipment_date": null
}</code></pre>
            </div>
            <div class="code-block">
              <div class="code-header">
                <span class="code-label">Order SO004</span>
                <button class="copy-btn" onclick="copyCode(this)">
                  <span>ğŸ“‹</span> Copy
                </button>
              </div>
              <pre><code>{
  "order_id": "SO004",
  "customer_id": "C001",
  "order_date": "2024-01-20",
  "order_total": 40.00,
  "tax": 3.20,
  "grand_total": 43.20,
  "payment_method": "Credit Card",
  "order_status": "Completed",
  "shipment_date": "2024-01-21"
}</code></pre>
            </div>
          </div>
        </div>
      </div>

      <h3>Step 5: Insert Order Line Items</h3>

      <div class="collapsible">
        <div class="collapsible-header" onclick="toggleCollapsible(this)">
          <span class="collapsible-title">All 7 Line Items for order_items_ref</span>
          <span class="collapsible-icon">â–¼</span>
        </div>
        <div class="collapsible-content">
          <div class="collapsible-body">
            <p>Insert these line items in <span class="inline-code">order_items_ref</span>:</p>
            <div class="code-block">
              <div class="code-header">
                <span class="code-label">Line Item OI001 (SO001)</span>
                <button class="copy-btn" onclick="copyCode(this)">
                  <span>ğŸ“‹</span> Copy
                </button>
              </div>
              <pre><code>{
  "order_item_id": "OI001",
  "order_id": "SO001",
  "product_id": "P001",
  "quantity": 2,
  "unit_price": 12.00,
  "subtotal": 24.00
}</code></pre>
            </div>
            <div class="code-block">
              <div class="code-header">
                <span class="code-label">Line Item OI002 (SO001)</span>
                <button class="copy-btn" onclick="copyCode(this)">
                  <span>ğŸ“‹</span> Copy
                </button>
              </div>
              <pre><code>{
  "order_item_id": "OI002",
  "order_id": "SO001",
  "product_id": "P003",
  "quantity": 1,
  "unit_price": 11.00,
  "subtotal": 11.00
}</code></pre>
            </div>
            <div class="code-block">
              <div class="code-header">
                <span class="code-label">Line Item OI003 (SO002)</span>
                <button class="copy-btn" onclick="copyCode(this)">
                  <span>ğŸ“‹</span> Copy
                </button>
              </div>
              <pre><code>{
  "order_item_id": "OI003",
  "order_id": "SO002",
  "product_id": "P002",
  "quantity": 3,
  "unit_price": 10.00,
  "subtotal": 30.00
}</code></pre>
            </div>
            <div class="code-block">
              <div class="code-header">
                <span class="code-label">Line Item OI004 (SO003)</span>
                <button class="copy-btn" onclick="copyCode(this)">
                  <span>ğŸ“‹</span> Copy
                </button>
              </div>
              <pre><code>{
  "order_item_id": "OI004",
  "order_id": "SO003",
  "product_id": "P001",
  "quantity": 5,
  "unit_price": 12.00,
  "subtotal": 60.00
}</code></pre>
            </div>
            <div class="code-block">
              <div class="code-header">
                <span class="code-label">Line Item OI005 (SO003)</span>
                <button class="copy-btn" onclick="copyCode(this)">
                  <span>ğŸ“‹</span> Copy
                </button>
              </div>
              <pre><code>{
  "order_item_id": "OI005",
  "order_id": "SO003",
  "product_id": "P002",
  "quantity": 3,
  "unit_price": 10.00,
  "subtotal": 30.00
}</code></pre>
            </div>
            <div class="code-block">
              <div class="code-header">
                <span class="code-label">Line Item OI006 (SO003)</span>
                <button class="copy-btn" onclick="copyCode(this)">
                  <span>ğŸ“‹</span> Copy
                </button>
              </div>
              <pre><code>{
  "order_item_id": "OI006",
  "order_id": "SO003",
  "product_id": "P003",
  "quantity": 4,
  "unit_price": 11.00,
  "subtotal": 44.00
}</code></pre>
            </div>
            <div class="code-block">
              <div class="code-header">
                <span class="code-label">Line Item OI007 (SO004)</span>
                <button class="copy-btn" onclick="copyCode(this)">
                  <span>ğŸ“‹</span> Copy
                </button>
              </div>
              <pre><code>{
  "order_item_id": "OI007",
  "order_id": "SO004",
  "product_id": "P002",
  "quantity": 4,
  "unit_price": 10.00,
  "subtotal": 40.00
}</code></pre>
            </div>
          </div>
        </div>
      </div>

      <div class="alert alert-success">
        <span class="alert-icon">âœ…</span>
        <div>
          <strong>Checkpoint:</strong> You should now have 3 customers, 3 products, 4 orders, and 7 line items across
          four collections!
        </div>
      </div>

      <h3>Step 6: Query Referenced Documents</h3>

      <div class="alert alert-warning">
        <span class="alert-icon">âš ï¸</span>
        <div>
          <strong>Important:</strong> Querying with references requires multiple queries (similar to SQL joins). You
          need to query each collection separately.
        </div>
      </div>

      <div class="collapsible">
        <div class="collapsible-header" onclick="toggleCollapsible(this)">
          <span class="collapsible-title">Example: Find Order Details with Line Items</span>
          <span class="collapsible-icon">â–¼</span>
        </div>
        <div class="collapsible-content">
          <div class="collapsible-body">
            <p><strong>Step 1:</strong> Find the order in <span class="inline-code">orders_ref</span></p>
            <div class="code-block">
              <div class="code-header">
                <span class="code-label">Query</span>
                <button class="copy-btn" onclick="copyCode(this)">
                  <span>ğŸ“‹</span> Copy
                </button>
              </div>
              <pre><code>{ "order_id": "SO003" }</code></pre>
            </div>
            <p><strong>Step 2:</strong> Find line items in <span class="inline-code">order_items_ref</span></p>
            <div class="code-block">
              <div class="code-header">
                <span class="code-label">Query</span>
                <button class="copy-btn" onclick="copyCode(this)">
                  <span>ğŸ“‹</span> Copy
                </button>
              </div>
              <pre><code>{ "order_id": "SO003" }</code></pre>
            </div>
            <p><strong>Result:</strong> Returns 3 line items (OI004, OI005, OI006)</p>
            <p><strong>Note:</strong> You need TWO queries to see complete order details!</p>
          </div>
        </div>
      </div>
    </section>

    <section id="comparison" class="section">
      <h2>âš–ï¸ Comparing the Two Approaches</h2>

      <table>
        <thead>
          <tr>
            <th>Aspect</th>
            <th>Embedded Approach</th>
            <th>Referenced Approach</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><strong>Number of Collections</strong></td>
            <td>2 collections</td>
            <td>4 collections</td>
          </tr>
          <tr>
            <td><strong>Data Duplication</strong></td>
            <td>Yes (customer info in each order)</td>
            <td>No (customer stored once)</td>
          </tr>
          <tr>
            <td><strong>Query Complexity</strong></td>
            <td>Simple (1 query)</td>
            <td>Complex (multiple queries)</td>
          </tr>
          <tr>
            <td><strong>Data Updates</strong></td>
            <td>Must update in multiple places</td>
            <td>Update once in master data</td>
          </tr>
          <tr>
            <td><strong>Historical Accuracy</strong></td>
            <td>Preserves data at transaction time</td>
            <td>Always shows current data</td>
          </tr>
          <tr>
            <td><strong>Performance</strong></td>
            <td>Faster (single read)</td>
            <td>Slower (multiple reads)</td>
          </tr>
          <tr>
            <td><strong>Storage Space</strong></td>
            <td>More (duplication)</td>
            <td>Less (normalized)</td>
          </tr>
        </tbody>
      </table>

      <h3>When to Use Each Approach</h3>

      <div class="comparison-grid">
        <div class="comparison-card">
          <h3>ğŸ“¦ Use Embedded When:</h3>
          <ul>
            <li>Data is always accessed together</li>
            <li>Historical accuracy matters (audit trails)</li>
            <li>One-to-few relationships (1-20 items)</li>
            <li>Read performance is critical</li>
            <li>Data doesn't change frequently</li>
          </ul>
          <h4 style="color: var(--amber); margin-top: 1rem;">Accounting Examples:</h4>
          <ul>
            <li>âœ… Sales orders with line items</li>
            <li>âœ… Invoices with payment details</li>
            <li>âœ… Journal entries with line items</li>
            <li>âœ… Employee with timecard data</li>
          </ul>
        </div>

        <div class="comparison-card">
          <h3>ğŸ”— Use Referenced When:</h3>
          <ul>
            <li>Data changes frequently</li>
            <li>Master data tables</li>
            <li>Many-to-many relationships</li>
            <li>Storage optimization needed</li>
            <li>Data integrity is critical</li>
          </ul>
          <h4 style="color: var(--amber); margin-top: 1rem;">Accounting Examples:</h4>
          <ul>
            <li>âœ… Customer master data</li>
            <li>âœ… Product catalogs</li>
            <li>âœ… Chart of accounts</li>
            <li>âœ… Vendor information</li>
          </ul>
        </div>
      </div>

      <div class="alert alert-info">
        <span class="alert-icon">ğŸ’¡</span>
        <div>
          <strong>Best Practice - Hybrid Approach:</strong> Most real-world systems use BOTH! Reference master data
          (customer_id, product_id) but embed transaction details (line items) and store key snapshots (prices at time
          of sale).
        </div>
      </div>
    </section>

    <section id="exercises" class="section">
      <h2>ğŸ¯ Practice Exercises</h2>

      <div class="collapsible">
        <div class="collapsible-header" onclick="toggleCollapsible(this)">
          <span class="collapsible-title">Exercise 1: Calculate Total Revenue by Customer</span>
          <span class="collapsible-icon">â–¼</span>
        </div>
        <div class="collapsible-content">
          <div class="collapsible-body">
            <p><strong>Task:</strong> Find the total revenue (sum of grand_total) for each customer.</p>
            <p><strong>Collection:</strong> Use <span class="inline-code">orders_embedded</span></p>
            <div class="code-block">
              <div class="code-header">
                <span class="code-label">Aggregation Pipeline</span>
                <button class="copy-btn" onclick="copyCode(this)">
                  <span>ğŸ“‹</span> Copy
                </button>
              </div>
              <pre><code>[
  {
    "$group": {
      "_id": "$customer.customer_id",
      "customer_name": { "$first": "$customer.name" },
      "total_revenue": { "$sum": "$grand_total" },
      "order_count": { "$sum": 1 }
    }
  },
  {
    "$sort": { "total_revenue": -1 }
  }
]</code></pre>
            </div>
            <p><strong>Expected Results:</strong></p>
            <ul>
              <li>Michael Chen (C003): $144.72</li>
              <li>John Smith (C001): $81.00 ($37.80 + $43.20)</li>
              <li>Sarah Jones (C002): $32.40</li>
            </ul>
            <p><strong>Accounting Application:</strong> Customer revenue report / Accounts receivable aging summary</p>
          </div>
        </div>
      </div>

      <div class="collapsible">
        <div class="collapsible-header" onclick="toggleCollapsible(this)">
          <span class="collapsible-title">Exercise 2: Find Most Popular Products</span>
          <span class="collapsible-icon">â–¼</span>
        </div>
        <div class="collapsible-content">
          <div class="collapsible-body">
            <p><strong>Task:</strong> Identify which products are ordered most frequently.</p>
            <p><strong>Collection:</strong> Use <span class="inline-code">order_items_ref</span></p>
            <div class="code-block">
              <div class="code-header">
                <span class="code-label">Aggregation Pipeline</span>
                <button class="copy-btn" onclick="copyCode(this)">
                  <span>ğŸ“‹</span> Copy
                </button>
              </div>
              <pre><code>[
  {
    "$group": {
      "_id": "$product_id",
      "total_quantity_sold": { "$sum": "$quantity" },
      "total_revenue": { "$sum": "$subtotal" },
      "order_count": { "$sum": 1 }
    }
  },
  {
    "$sort": { "total_quantity_sold": -1 }
  }
]</code></pre>
            </div>
            <p><strong>Expected Results:</strong></p>
            <ul>
              <li>P002 (Oatmeal Raisin): 10 dozen sold</li>
              <li>P001 (Chocolate Chip): 7 dozen sold</li>
              <li>P003 (Sugar): 5 dozen sold</li>
            </ul>
            <p><strong>Accounting Application:</strong> Product profitability analysis for cost accounting</p>
          </div>
        </div>
      </div>

      <div class="collapsible">
        <div class="collapsible-header" onclick="toggleCollapsible(this)">
          <span class="collapsible-title">Exercise 3: Find Unpaid Invoices</span>
          <span class="collapsible-icon">â–¼</span>
        </div>
        <div class="collapsible-content">
          <div class="collapsible-body">
            <p><strong>Task:</strong> List all orders that are not yet completed (Pending or Shipped).</p>
            <p><strong>Collection:</strong> Use either <span class="inline-code">orders_embedded</span> or <span
                class="inline-code">orders_ref</span></p>
            <div class="code-block">
              <div class="code-header">
                <span class="code-label">Filter Query</span>
                <button class="copy-btn" onclick="copyCode(this)">
                  <span>ğŸ“‹</span> Copy
                </button>
              </div>
              <pre><code>{ "order_status": { "$ne": "Completed" } }</code></pre>
            </div>
            <p><strong>Expected Results:</strong></p>
            <ul>
              <li>SO002 (status: "Shipped")</li>
              <li>SO003 (status: "Pending")</li>
            </ul>
            <p><strong>Accounting Application:</strong> Outstanding invoices report for cash flow management</p>
          </div>
        </div>
      </div>

      <div class="collapsible">
        <div class="collapsible-header" onclick="toggleCollapsible(this)">
          <span class="collapsible-title">Exercise 4: Calculate Average Order Value</span>
          <span class="collapsible-icon">â–¼</span>
        </div>
        <div class="collapsible-content">
          <div class="collapsible-body">
            <p><strong>Task:</strong> What is the average order value (grand_total)?</p>
            <div class="code-block">
              <div class="code-header">
                <span class="code-label">Aggregation Pipeline</span>
                <button class="copy-btn" onclick="copyCode(this)">
                  <span>ğŸ“‹</span> Copy
                </button>
              </div>
              <pre><code>[
  {
    "$group": {
      "_id": null,
      "average_order_value": { "$avg": "$grand_total" },
      "total_orders": { "$sum": 1 },
      "total_revenue": { "$sum": "$grand_total" }
    }
  }
]</code></pre>
            </div>
            <p><strong>Expected Result:</strong> Average Order Value: ~$64.53 ($258.12 Ã· 4 orders)</p>
            <p><strong>Accounting Application:</strong> Key performance indicator for sales analytics</p>
          </div>
        </div>
      </div>

      <div class="collapsible">
        <div class="collapsible-header" onclick="toggleCollapsible(this)">
          <span class="collapsible-title">Exercise 5: Add a New Order</span>
          <span class="collapsible-icon">â–¼</span>
        </div>
        <div class="collapsible-content">
          <div class="collapsible-body">
            <p><strong>Task:</strong> Create a new order for Sarah Jones:</p>
            <ul>
              <li>2 dozen Chocolate Chip ($12.00 each = $24.00)</li>
              <li>1 dozen Sugar Cookie ($11.00)</li>
              <li>Order total: $35.00</li>
              <li>Tax (8%): $2.80</li>
              <li>Grand total: $37.80</li>
            </ul>
            <div class="code-block">
              <div class="code-header">
                <span class="code-label">New Order Document (orders_embedded)</span>
                <button class="copy-btn" onclick="copyCode(this)">
                  <span>ğŸ“‹</span> Copy
                </button>
              </div>
              <pre><code>{
  "order_id": "SO005",
  "order_date": "2024-01-22",
  "customer": {
    "customer_id": "C002",
    "name": "Sarah Jones",
    "email": "sarah@email.com",
    "phone": "555-0102"
  },
  "shipping_address": {
    "street": "456 Oak Ave",
    "city": "Naperville",
    "state": "IL",
    "zip": "60540"
  },
  "items": [
    {
      "product_id": "P001",
      "product_name": "Chocolate Chip Cookies (Dozen)",
      "quantity": 2,
      "unit_price": 12.00,
      "subtotal": 24.00
    },
    {
      "product_id": "P003",
      "product_name": "Sugar Cookies (Dozen)",
      "quantity": 1,
      "unit_price": 11.00,
      "subtotal": 11.00
    }
  ],
  "order_total": 35.00,
  "tax": 2.80,
  "grand_total": 37.80,
  "payment_method": "Credit Card",
  "order_status": "Completed",
  "shipment_date": "2024-01-23"
}</code></pre>
            </div>
            <p><strong>Verification:</strong> Run Exercise 1 again. Sarah's total should now be $70.20 ($32.40 +
              $37.80).</p>
          </div>
        </div>
      </div>
    </section>

    <section id="reference" class="section">
      <h2>ğŸ“– Quick Reference</h2>

      <h3>JSON Data Types</h3>
      <table>
        <thead>
          <tr>
            <th>Type</th>
            <th>Example</th>
            <th>Notes</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>String</td>
            <td><code>"John Smith"</code></td>
            <td>Double quotes required</td>
          </tr>
          <tr>
            <td>Number</td>
            <td><code>42</code> or <code>12.50</code></td>
            <td>No quotes</td>
          </tr>
          <tr>
            <td>Boolean</td>
            <td><code>true</code> or <code>false</code></td>
            <td>Lowercase, no quotes</td>
          </tr>
          <tr>
            <td>Null</td>
            <td><code>null</code></td>
            <td>Represents no value</td>
          </tr>
          <tr>
            <td>Array</td>
            <td><code>[1, 2, "three"]</code></td>
            <td>Square brackets</td>
          </tr>
          <tr>
            <td>Object</td>
            <td><code>{"key": "value"}</code></td>
            <td>Curly braces</td>
          </tr>
        </tbody>
      </table>

      <h3>Basic Query Patterns</h3>
      <table>
        <thead>
          <tr>
            <th>Query Type</th>
            <th>Syntax</th>
            <th>Example</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>Find all</td>
            <td><code>{}</code></td>
            <td>Returns all documents</td>
          </tr>
          <tr>
            <td>Exact match</td>
            <td><code>{ "field": "value" }</code></td>
            <td><code>{ "status": "Pending" }</code></td>
          </tr>
          <tr>
            <td>Greater than</td>
            <td><code>{ "field": { "$gt": value } }</code></td>
            <td><code>{ "total": { "$gt": 100 } }</code></td>
          </tr>
          <tr>
            <td>Not equal</td>
            <td><code>{ "field": { "$ne": value } }</code></td>
            <td><code>{ "status": { "$ne": "Cancelled" } }</code></td>
          </tr>
          <tr>
            <td>AND condition</td>
            <td><code>{ "f1": v1, "f2": v2 }</code></td>
            <td><code>{ "status": "Pending", "total": { "$gt": 50 } }</code></td>
          </tr>
          <tr>
            <td>OR condition</td>
            <td><code>{ "$or": [{...}, {...}] }</code></td>
            <td><code>{ "$or": [{"status": "Pending"}, {"status": "Shipped"}] }</code></td>
          </tr>
          <tr>
            <td>Nested field</td>
            <td><code>{ "parent.child": value }</code></td>
            <td><code>{ "customer.name": "John Smith" }</code></td>
          </tr>
        </tbody>
      </table>

      <h3>Aggregation Pipeline Stages</h3>
      <table>
        <thead>
          <tr>
            <th>Stage</th>
            <th>Purpose</th>
            <th>Example</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><code>$match</code></td>
            <td>Filter documents</td>
            <td><code>{ "$match": { "status": "Completed" } }</code></td>
          </tr>
          <tr>
            <td><code>$group</code></td>
            <td>Aggregate by field</td>
            <td><code>{ "$group": { "_id": "$customer_id", "total": { "$sum": "$amount" } } }</code></td>
          </tr>
          <tr>
            <td><code>$sort</code></td>
            <td>Sort results</td>
            <td><code>{ "$sort": { "total": -1 } }</code></td>
          </tr>
          <tr>
            <td><code>$limit</code></td>
            <td>Limit results</td>
            <td><code>{ "$limit": 10 }</code></td>
          </tr>
          <tr>
            <td><code>$sum</code></td>
            <td>Add values</td>
            <td><code>{ "$sum": "$amount" }</code> or <code>{ "$sum": 1 }</code> for count</td>
          </tr>
          <tr>
            <td><code>$avg</code></td>
            <td>Average values</td>
            <td><code>{ "$avg": "$price" }</code></td>
          </tr>
        </tbody>
      </table>

      <h3>Decision Tree: Embedded vs Referenced</h3>
      <div
        style="background-color: var(--bg-tertiary); padding: 1.5rem; border-radius: 0.75rem; border: 1px solid var(--border);">
        <ol style="line-height: 2;">
          <li><strong style="color: var(--amber);">Is data always accessed together?</strong>
            <br>â†’ YES: Consider Embedded | NO: Consider Referenced
          </li>
          <li><strong style="color: var(--amber);">How many related items?</strong>
            <br>â†’ 1-20 items: Embedded works | 100+ items: Referenced better
          </li>
          <li><strong style="color: var(--amber);">Does data change frequently?</strong>
            <br>â†’ YES: Referenced (easier updates) | NO: Embedded (better performance)
          </li>
          <li><strong style="color: var(--amber);">Need historical snapshots?</strong>
            <br>â†’ YES: Embedded (preserves history) | NO: Referenced (current data)
          </li>
          <li><strong style="color: var(--amber);">Is read speed critical?</strong>
            <br>â†’ YES: Embedded (single query) | NO: Referenced acceptable
          </li>
        </ol>
      </div>
    </section>

    <section class="section">
      <h2>ğŸ“ Conclusion and Key Takeaways</h2>

      <h3>What You Learned</h3>
      <ul>
        <li><strong>JSON Fundamentals:</strong> Data types, syntax rules, and structure</li>
        <li><strong>MongoDB & BSON:</strong> How MongoDB extends JSON with binary format and special types (ObjectId,
          Date, Decimal128)</li>
        <li><strong>ID Strategies:</strong> Auto-generated <code>_id</code> vs custom <code>_id</code> approaches</li>
        <li><strong>Document Insertion:</strong> How to insert documents using MongoDB Atlas</li>
        <li><strong>Two Design Patterns:</strong> Embedded (nest data) vs. Referenced (link data with IDs)</li>
        <li><strong>Trade-offs:</strong> Embedded = faster but duplicates; Referenced = normalized but slower</li>
        <li><strong>Query Techniques:</strong> Basic filters, aggregation pipelines, and accounting queries</li>
        <li><strong>Accounting Applications:</strong> Revenue analysis, AR aging, product profitability</li>
      </ul>

      <h3>Connection to Accounting</h3>
      <ul>
        <li><strong>Audit Trails:</strong> Embedded approach preserves historical accuracy</li>
        <li><strong>Master Data:</strong> Referenced approach keeps customer/product data consistent</li>
        <li><strong>Reporting:</strong> Aggregation pipelines enable powerful financial analysis</li>
        <li><strong>ERP Systems:</strong> Understanding both paradigms prepares you for modern accounting systems</li>
        <li><strong>GAAP Compliance:</strong> Embedded pricing preserves transaction-date values for revenue recognition
        </li>
      </ul>

      <div class="alert alert-success">
        <span class="alert-icon">ğŸ‰</span>
        <div>
          <strong>Congratulations!</strong> You now understand JSON, BSON, and how MongoDB differs from relational
          databases. You can choose between embedded and referenced approaches based on your specific accounting needs!
        </div>
      </div>

      <h3>Next Steps</h3>
      <ul>
        <li>Practice with more complex queries and aggregations</li>
        <li>Try creating your own collections for different business scenarios</li>
        <li>Compare this with a relational database implementation</li>
        <li>Explore MongoDB features like indexes, transactions, and schema validation</li>
        <li>Learn about MongoDB's $lookup operator for joining referenced collections</li>
        <li>Study how modern ERP systems use hybrid approaches</li>
      </ul>
    </section>
  </div>

  <div class="footer">
    <p>MongoDB Tutorial Â© 2024</p>
    <p style="margin-top: 0.5rem;">Educational Resource | Julia's Cookies Business Scenario</p>
  </div>

  <button class="back-to-top" onclick="scrollToTop()">â†‘</button>

  <script>
    function copyCode( button ) {
      const codeBlock = button.closest( '.code-block' );
      const code = codeBlock.querySelector( 'code' ).textContent;

      navigator.clipboard.writeText( code ).then( () => {
        const originalHTML = button.innerHTML;
        button.innerHTML = '<span>âœ…</span> Copied!';
        button.classList.add( 'copied' );

        setTimeout( () => {
          button.innerHTML = originalHTML;
          button.classList.remove( 'copied' );
        }, 2000 );
      } ).catch( err => {
        console.error( 'Failed to copy:', err );
        alert( 'Failed to copy code. Please copy manually.' );
      } );
    }

    function toggleCollapsible( header ) {
      const collapsible = header.parentElement;
      collapsible.classList.toggle( 'active' );
    }

    function toggleHeader() {
      const header = document.querySelector( '.header' );
      const icon = document.getElementById( 'toggle-icon' );
      const text = document.getElementById( 'toggle-text' );

      header.classList.toggle( 'minimized' );

      if ( header.classList.contains( 'minimized' ) ) {
        icon.textContent = '+';
        text.textContent = 'Expand';
      } else {
        icon.textContent = 'âˆ’';
        text.textContent = 'Minimize';
      }
    }

    window.onscroll = function () {
      const backToTop = document.querySelector( '.back-to-top' );
      if ( document.body.scrollTop > 300 || document.documentElement.scrollTop > 300 ) {
        backToTop.classList.add( 'visible' );
      } else {
        backToTop.classList.remove( 'visible' );
      }
    };

    function scrollToTop() {
      window.scrollTo( {
        top: 0,
        behavior: 'smooth'
      } );
    }

    document.querySelectorAll( 'a[href^="#"]' ).forEach( anchor => {
      anchor.addEventListener( 'click', function ( e ) {
        e.preventDefault();
        const target = document.querySelector( this.getAttribute( 'href' ) );
        if ( target ) {
          target.scrollIntoView( {
            behavior: 'smooth',
            block: 'start'
          } );
        }
      } );
    } );

    document.addEventListener( 'DOMContentLoaded', function () {
      console.log( 'MongoDB Tutorial loaded successfully!' );
    } );
  </script>
</body>

</html>